angular.module("MarvelApp",["ngResource","ngRoute","ui.bootstrap"]).config(["$locationProvider","$routeProvider","$httpProvider",function(e,r,t){e.html5Mode(!0),t.interceptors.push("httpInterceptor"),r.when("/",{templateUrl:"js/views/home/index.html"}).when("/comics",{templateUrl:"js/views/comic/index.html",controller:"ComicController",controllerAs:"comicCtrl"}).when("/comic/:id",{templateUrl:"js/views/comic/single.html",controller:"ComicController",controllerAs:"comicCtrl"}).when("/creators",{templateUrl:"js/views/creator/index.html",controller:"CreatorController",controllerAs:"creatorCtrl"}).when("/creator/:id",{templateUrl:"js/views/creator/single.html",controller:"CreatorController",controllerAs:"creatorCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("MarvelApp").controller("ComicController",["$scope","$location","$routeParams","MarvelComics",function(e,r,t,o){var a=this,c=0;e.loadMore=function(){c+=12,o.comics.get({limit:12,offset:c,titleStartsWith:o.letter},function(e){o.values=o.values.concat(e.data.results)})},void 0===t.id?(o.comics.get({limit:12},function(e){o.values=e.data.results}),e.comics=o):(o.comics.get({id:t.id},function(e){a.comic=e.data.results[0]}),o.creatorsByComic.get({id:t.id},function(e){a.creators=e.data.results}))}]),angular.module("MarvelApp").controller("CreatorController",["$scope","$routeParams","MarvelCreators",function(e,r,t){var o=this,a=1;e.loadMore=function(){a+=12,t.creators.get({limit:12,offset:a,firstNameStartsWith:t.letter},function(e){t.values=t.values.concat(e.data.results)})},void 0===r.id?(t.creators.get({offset:1,limit:12},function(e){t.values=e.data.results}),e.creators=t):(t.creators.get({id:r.id},function(e){o.creator=e.data.results[0]}),t.comicsByCreator.get({id:r.id},function(e){o.comics=e.data.results}))}]),angular.module("MarvelApp").controller("NavbarController",["$scope","$location",function(e,r){e.isActive=function(e){return e===r.path()}}]),angular.module("MarvelApp").controller("SearchController",["$scope","MarvelCreators","MarvelComics",function(e,r,t){var o=this;e.alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o.filterByAlphabet=function(o){"comics"===e.attr?t.comics.get({limit:12,titleStartsWith:o},function(e){t.values=e.data.results,t.letter=o}):"creators"===e.attr&&r.creators.get({limit:12,firstNameStartsWith:o},function(e){r.values=e.data.results,r.letter=o})}}]),angular.module("MarvelApp").directive("loader",["$rootScope",function(e){return function(e,r,t){return e.$on("loader_show",function(){return r.show()}),e.$on("loader_hide",function(){return r.hide()})}}]),angular.module("MarvelApp").directive("searchAlphabet",function(){return{restrict:"E",templateUrl:"js/views/directives/search-alphabet.html",scope:{attr:"@"},controller:"SearchController",controllerAs:"searchCtrl"}}),angular.module("MarvelApp").factory("httpInterceptor",["$q","$rootScope","$log",function(e,r,t){var o=0;return{request:function(t){return o++,r.$broadcast("loader_show"),t||e.when(t)},response:function(t){return 0===--o&&r.$broadcast("loader_hide"),t||e.when(t)},responseError:function(t){return--o||r.$broadcast("loader_hide"),e.reject(response)}}}]),angular.module("MarvelApp").factory("MarvelCharacters",["$resource",function(e){var r="8ee35a566b7f8c8522e9a12db77fceec";return e("http://gateway.marvel.com/v1/public/characters/:id",{apikey:r})}]),angular.module("MarvelApp").factory("MarvelComics",["$resource",function(e){var r="8ee35a566b7f8c8522e9a12db77fceec";return{letter:void 0,values:[],comics:e("http://gateway.marvel.com/v1/public/comics/:id",{apikey:r}),creatorsByComic:e("http://gateway.marvel.com/v1/public/comics/:id/creators",{apikey:r})}}]),angular.module("MarvelApp").factory("MarvelCreators",["$resource",function(e){var r="8ee35a566b7f8c8522e9a12db77fceec";return{letter:void 0,values:[],creators:e("http://gateway.marvel.com/v1/public/creators/:id",{apikey:r}),comicsByCreator:e("http://gateway.marvel.com/v1/public/creators/:id/comics",{apikey:r})}}]);